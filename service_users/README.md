# Users Service

FastAPI-сервис для управления пользователями с использованием JWT авторизации и PostgreSQL базы данных.

## Функционал

- Авторизация и регистрация пользователей
- JWT-авторизация
- Управление профилем пользователя
- Список пользователей с пагинацией и фильтрами для админов
- Доступ к данным на основе ролей
- Стандартизированный JSON формат ответов 

## Архитектура

```
service_users/
├── main.py              # FastAPI точка входа
├── config.py            # Настройки
├── database.py          # Подключение к БД и создание сессий
├── models.py            # SQLAlchemy модели для БД
├── schemas.py           # Pydantic схемы для валидации
├── auth.py              # Утилиты для авторизации
├── routers/             # Директория API эндпоинтов
│   ├── __init__.py
│   ├── auth.py          # Эндпоинты для авторизации
│   └── users.py         # Эндпоинты для управления пользователями
├── requirements.txt     # Python зависимости
├── .env.example         # Пример переменных среды
└── README.md            # Текущий файл
```

## Запуск

1. **Установите зависимости:**
   ```bash
   pip install -r requirements.txt
   ```

2. **Скопируйте .env.example в .env и измените его**

3. **Создайте PostgreSQL БД:**
   ```bash
   psql
   ```
   ```psql 
   CREATE DATABASE "название_БД";
   ```

4. **Запустите сервис:**
   ```bash
   python main.py
   ```
   Или
   ```bash
   uvicorn main:app --host 0.0.0.0 --port 8001 --reload
   ```

## API Endpoints

### Authentication

- `POST /v1/auth/register` - Регистрация нового пользователя
- `POST /v1/auth/login` - Логин и получение JWT-токена

### Users

- `GET /v1/users/me` - Получение своего профиля пользователя
- `PUT /v1/users/me` - Обновление своего профиля пользователя
- `GET /v1/users/` - Получение всех пользователей с пагинацией и фильтрами (только для админов)
